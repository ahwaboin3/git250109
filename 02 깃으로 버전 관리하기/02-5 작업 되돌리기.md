> 02-5 작업 되돌리기.md

# 02-5 작업 되돌리기
- 스테이지에 올렸던 파일을 내리거나 커밋을 취소하는 등 각 단계로 돌아가기 방법을 알아보겠습니다.

- 작업 트리에서 수정한 파일 되돌리기 - git restore
1. hello.txt파일을 열어서 숫자 3을 three로 수정한 후 저장하고 편집기를 종료합니다.
2. 상태를 확인해 보면 두 번째 괄호 안의 메시지를 보면, 작업 디렉터리의 변경 사항을 취소하려면 restore명령을 사용하라고 되어 있습니다.
3. 조금 전에 수정했던 hello.txt의 수정 사항을 취소해 보겠습니다. git restore 명령 다음에 한 칸 띄고 파일 이름을 쓰면 됩니다.
---
    $ git restore hello.txt
---
4. restore 명령이 정상으로 처리되면 화면에는 아무것도 나타나지 않습니다.

- 스테이징 되돌리기 - git restore --staged
- 이번에는 수정된 파일을 스테이징까지 했을 때 스테이징을 취소하는 방법을 살펴보겠습니다.
1. hello2.txt를 수정해 보겠습니다. 기존 내용을 삭제하고 대문자 A,B,C,D를 입력한 후 저장하고 편집기를 종료합니다.
2. 파일을 스테이지에 올린다.
3. 상태 메시지에서 괄호 안의 내용을 보시면 스테이지에서 내리려면 사용 할 수 있는 명령어가 있습니다.
4. 스테이지에서 파일을 내린다.
5. 상태를 확인하면 파일이 아직 스테이지에 올라가기 전으로 돌아온 것을 확인할 수 있습니다.

-- 최신 커밋 되돌리기 - git reset HEAD^
- 가장 마지막에 한 커밋을 취소하는 방법입니다. 커밋을 취소하면 커밋과 스테이징이 함께 취소됩니다.
1. hello2.txt문서를 대문자 E를 끝에 추가한 후 저장합니다.
2. 스테이징과 커밋을 실행합니다.
3. 커밋이 되었는지 확인합니다.
4. 최신 커밋을 되돌리기
---
    $ git reset  HEAD^
---
5. 커밋이 취소되고 스테이지에서도 내려졌다는 메시지가 나타납니다.
6. 로그를 확인해 보겠습니다.

git reset 명령의 옵션
명령 | 설명
--- | ---
$ git reset --soft HEAD^ | 커밋을 취소하고 파일을 staged 상태로 작업 디렉터리에 보관합니다.
$ git reset --mixed HEAD^ | 커밋을 취소하고 파일을 unstaged 상태로 작업 디렉터리에 보관합니다.
$ git reset HEAD^ | 커밋을 취소하고 unstaged 상태로 작업 디렉터리에 보관합니다. --mixed 옵션과 같다

- 특정 커밋으로 되돌리기 - git reset 해시
1. rev.txt를 만듭니다. 간단하게 영문자 'a'를 입력한 후 저장하세요.
2. 스테이지에 올린 후 커밋 합니다. 커밋 메세지 R1을 붙여 커밋합니다.
3. rev.txt에 b라는 문자를 추가하고 R2메세와 함께 커밋합니다.
4. rev.txt에 c라는 문자를 추가한 후 R3메시지와 함께 커밋하고 rev.txt에 영문자 d를 추가한 후 R4메시지와 함께 커밋합니다. 지금까지 커밋을 모두 4번 했습니다.
5. 커밋 로그를 확인해 보세요.
6. 커밋 4개 가운데 R2라는 메세지가 붙은 R2커밋으로 되돌려 보겠습니다. 즉, R3 커밋과 R4커밋을 삭제하고 R2커밋을 최신 커밋으로 만들 것입니다. R2커밋의 커밋 해시를 복사합니다.
7. 
---
    $ git reset --hard 복사한 커밋 해시
---
8. 되돌린 커밋 해시 위치로 HEAD가 옮겨졌다고 나타납니다.
9. 깃 로그와 파일을 확인합니다.

- 커밋 변경 이력 취소하기 - git revert
- 특정 커밋으로 되돌릴 때 수정했던 것을 삭제해도 된다면 git reset명령을 사용하면 되지만 나중에 사용할 것을 대비해서 커밋을 취소하더라도 커밋했떤 기록은 남겨 두어야 할 때가 있습니다. 즉, 변경사항만 취소하고 커밋은 남겨 두는 거죠. 이럴 경우에는 'git revert'라는 명령을 사용합니다.

1. rev.txt에 영문자 'e'를 추가합니다.
2. R5라는 메시지와 함께 커밋하세요.
3. R5버전을 취소하고 R2로 돌아 가는데 취소하는 R5버전을 삭제하지 않고 남겨 두려고 합니다. R5의 커밋 해시를 지정합니다.
---
    $ git revert 복사한 커밋 해시
---
6. 기본 편집기가 자동으로 나타나면서 커밋 메세지를 입력할 수 있습니다.
7. 로그를 확인합니다.
8. 로그에 R5를 revert한 새로운 커밋이 생겼습니다. 그리고 기존의 R5 역시 사라지지 않았습니다. R5버전을 지우는 대신 R5에서 변경했떤 내용만 취소하고, R5를 취소했다는 커밋을 새로운 만든 것입니다.
9. rev.txt문서를 확인합니다.